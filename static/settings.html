<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex">
  <link rel="icon" id="icon" href="/assets/img/salyte.jpg">
  <link rel="stylesheet" href="/assets/css/app.css?v=3">
  <link rel="stylesheet" href="/assets/css/menu.css?v=3">
  <link rel="stylesheet" href="/assets/css/settings.css?v=3">
  <script rel="preload" src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js?v=3"></script>
  <script src="/assets/js/particles.js?v=3"></script>
  <script src="/assets/js/cdn-rocket.js?v=3"></script>
  <script src="/assets/js/anym.js?v=3"></script>
  <title>Arctic 1.0</title>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6YEQ7Q0XRC"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-6YEQ7Q0XRC');
  </script>
  
  <!-- Loading Screen CSS -->
  <style>
    /* Hidden by default to prevent flash when disabled */
    #loading-screen {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #000000;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease-out;
    }

    #loading-screen.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    /* Spinner Styles */
    .spinner {
      width: 44px;
      height: 44px;
      animation: spinner-y0fdc1 2s infinite ease;
      transform-style: preserve-3d;
    }

    .spinner > div {
      background-color: rgba(0,77,255,0.2);
      height: 100%;
      position: absolute;
      width: 100%;
      border: 2px solid #004dff;
    }

    .spinner div:nth-of-type(1) { transform: translateZ(-22px) rotateY(180deg); }
    .spinner div:nth-of-type(2) { transform: rotateY(-270deg) translateX(50%); transform-origin: top right; }
    .spinner div:nth-of-type(3) { transform: rotateY(270deg) translateX(-50%); transform-origin: center left; }
    .spinner div:nth-of-type(4) { transform: rotateX(90deg) translateY(-50%); transform-origin: top center; }
    .spinner div:nth-of-type(5) { transform: rotateX(-90deg) translateY(50%); transform-origin: bottom center; }
    .spinner div:nth-of-type(6) { transform: translateZ(22px); }

    @keyframes spinner-y0fdc1 {
      0% { transform: rotate(45deg) rotateX(-25deg) rotateY(25deg); }
      50% { transform: rotate(45deg) rotateX(-385deg) rotateY(25deg); }
      100% { transform: rotate(45deg) rotateX(-385deg) rotateY(385deg); }
    }
  </style>
</head>

<body>
  <!-- Loading Screen -->
  <div id="loading-screen">
    <div class="spinner">
      <div></div><div></div><div></div><div></div><div></div><div></div>
    </div>
  </div>

  <!-- Settings Page Content -->
  <div id="contextMenu" class="context-menu themesExcluded" style="--ripple-duration:300ms;">
    <div class="context-menu-item with-submenu themesExcluded" id="contextItem" anim="ripple" onclick="toggleSubmenu(event)">
      <i class="bi bi-file-spreadsheet"></i> Tab Cloak
    </div>
    <div class="context-submenu themesExcluded" id="contextItem">
      <div class="context-menu-item themesExcluded" anim="ripple" onclick="tabCloak()">Enable</div>
      <div class="context-menu-item themesExcluded" anim="ripple" onclick="disableTabCloak()">Disable</div>
    </div>
    <div class="context-menu-item themesExcluded" id="contextItem" onclick="visitSite()"><i class="bi bi-clock-history"></i> Last Visited Site</div>
    <div class="context-menu-item themesExcluded" id="contextItem" onclick="openWindow()"><i class="bi bi-box-arrow-up-right"></i> About:Blank Cloak</div>
    <div class="context-menu-item themesExcluded" id="contextItem" onclick="openSettings()"><i class="bi bi-gear"></i> View all Settings</div>
  </div>

  <nav id="mytopnav">
    <button class="btn-main active" anim="ripple"><i class="bi bi-gear" style="font-size:30px;"></i>Settings</button>
    <button class="btn-main" anim="ripple" onclick="send('/apps')"><i class="bi bi-grid-fill" style="font-size:30px;"></i>Apps</button><br>
    <a href="/" class="title" anim="ripple"><img src="/assets/img/doge2.jpg" style="width:22px;height:22px;" id="logo"> Arctic 1.0</a>    
  </nav>

  <br>
  <div class="containers" id="settingsContainer">
    <!-- your settings blocks (unchanged) -->
    <!-- ... everything from Tab Cloaking to Loading Screen ... -->
    <!-- kept exactly the same -->
  </div>

  <div id="panicPopup" class="themesExcluded">
    <div id="panicPopup-content" class="themesExcluded">
      <h2 style="font-family:poppins;">Panic Key</h2>
      <input id="panicPopup-input" class="popupInput" placeholder="Set a key" onclick="detectKey()">
      <p style="font-size:13px;">Warning: Make sure to set a unique key, otherwise you may accidentally press it.</p>
      <p id="pkErrorMessage" style="display:none;font-size:13px;color:red;">Please enter a key.</p><br>
      <button anim="ripple" onclick="savePK()" class="btn-main">Save</button>
      <button anim="ripple" onclick="closePK()" class="btn-main">Cancel</button>
    </div>
  </div>

  <div id="backgroundPopup" class="themesExcluded">
    <div id="backgroundPopup-content" class="themesExcluded">
      <h2 style="font-family:poppins;">Custom Background</h2>
      <input type="text" id="backgroundPopup-input" class="popupInput" placeholder="Background URL">
      <p style="font-size:13px;">Please include "https://" in your URL.</p>
      <p id="bgErrorMessage" style="display:none;font-size:13px;color:red;">Please enter a valid link.</p><br>
      <button anim="ripple" onclick="saveBackground()" class="btn-main">Save</button>
      <button anim="ripple" onclick="closeBackgroundPopup()" class="btn-main">Cancel</button>
    </div>
  </div>

  <script src="/assets/js/themes.js?v=3"></script>
  <script src="/assets/js/settings.js?v=3"></script>
  <script src="/assets/js/main.js?v=3"></script>

  <!-- Fixed Loading Screen Script -->
  <script>
    const loadingScreen = document.getElementById('loading-screen');
    const isDisabled = localStorage.getItem('loadingScreenDisabled') === 'true';

    if (!isDisabled) {
      // Show loading screen only if not disabled
      loadingScreen.style.display = 'flex';
      document.body.style.overflow = 'hidden';

      window.addEventListener('load', () => {
        loadingScreen.classList.add('fade-out');
        setTimeout(() => {
          loadingScreen.style.display = 'none';
          document.body.style.overflow = '';
        }, 500);
      });
    } else {
      // Make sure it's hidden when disabled
      loadingScreen.style.display = 'none';
      document.body.style.overflow = '';
    }

    // Functions to enable/disable loading screen
    function enableLoadingScreen() {
      localStorage.removeItem('loadingScreenDisabled');
      location.reload();
    }

    function disableLoadingScreen() {
      localStorage.setItem('loadingScreenDisabled', 'true');
      location.reload();
    }
  </script>
</body>
</html>
